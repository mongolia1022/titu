/**
 * @author 一滴水 qq:348681066
 */
var moptions={lineNumbers:true,matchBrackets:true,mode:"application/x-httpd-php",indentUnit:8,indentWithTabs:true,enterMode:"keep",tabMode:"shift",theme:"night",inputId:{fileName:"fileName",fileCode:"fileCode",dirPath:"dirPath",newFolder:"newFolder",newFile:"newFile",newName:"newName",newUpload:"newUpload"},sUrl:{sUrlPath:"./index.php?m=system&s=changeskin",getCurDirTree:"./index.php?m=system&s=changeskin&a=getCurDirTree",getCurDirs:"./index.php?m=system&s=changeskin&a=getCurDirs",getFileCode:"./index.php?m=system&s=changeskin&a=getFileCode",saveFileCode:"./index.php?m=system&s=changeskin&a=saveFileCode",createDir:"./index.php?m=system&s=changeskin&a=createDir",createPHPFile:"./index.php?m=system&s=changeskin&a=createPHPFile",createJSFile:"./index.php?m=system&s=changeskin&a=createJSFile",createCSSFile:"./index.php?m=system&s=changeskin&a=createCSSFile",createXMLFile:"./index.php?m=system&s=changeskin&a=createXMLFile",createHTMLFile:"./index.php?m=system&s=changeskin&a=createHTMLFile",updateImageResource:"./index.php?m=system&s=changeskin&a=updateImageResource",uploadVideoResource:"./index.php?m=system&s=changeskin&a=uploadVideoResource",reNameFile:"./index.php?m=system&s=changeskin&a=reNameFile",reNameDir:"./index.php?m=system&s=changeskin&a=reNameDir",moveFile:"./index.php?m=system&s=changeskin&a=moveFile",moveDir:"./index.php?m=system&s=changeskin&a=moveDir",deleteFile:"./index.php?m=system&s=changeskin&a=deleteFile",deleteDir:"./index.php?m=system&s=changeskin&a=deleteDir"}};var HANDLE_saveing=false;var codeEditor=CodeMirror.fromTextArea(document.getElementById(moptions.inputId.fileCode),{lineNumbers:moptions.lineNumbers,matchBrackets:moptions.matchBrackets,mode:moptions.mode,indentUnit:moptions.indentUnit,indentWithTabs:moptions.indentWithTabs,enterMode:moptions.enterMode,tabMode:moptions.tabMode,theme:moptions.theme,onKeyEvent:function(i,e){if((e.keyCode==122||e.keyCode==27)&&e.type=='keydown'){e.stop();return toggleFullscreenEditing()};if(e.keyCode==32&&(e.ctrlKey||e.metaKey)&&!e.altKey&&e.type=='keydown'){e.stop();return startComplete()};if(e.keyCode==83&&(e.ctrlKey||e.metaKey)&&!e.altKey&&e.type=='keydown'){e.stop();if(HANDLE_saveing){return false}else{reSetHandle(true);saveFileCode()}}}});function toggleFullscreenEditing(){var editorDiv=$('.CodeMirror-scroll');if(!editorDiv.hasClass('fullscreen')){toggleFullscreenEditing.beforeFullscreen={height:editorDiv.height(),width:editorDiv.width()};editorDiv.addClass('fullscreen');editorDiv.height('100%');editorDiv.width('100%');codeEditor.refresh()}else{editorDiv.removeClass('fullscreen');editorDiv.height(toggleFullscreenEditing.beforeFullscreen.height);editorDiv.width(toggleFullscreenEditing.beforeFullscreen.width);codeEditor.refresh()}};function getFileExt(file){var file,ext,n;n=file.lastIndexOf(".");ext=file.substring(n+1).toLowerCase();return ext};function setNewMode(file){var ext=getFileExt(file);var mode={php:"application/x-httpd-php",css:"text/css",html:"text/html",shtml:"text/html",js:{name:"javascript",json:true},xml:{name:"xml",htmlMode:true},txt:""};codeEditor.setOption('mode',mode[ext])}